"use strict";(()=>{var e={};e.id=922,e.ids=[922],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8004:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>p,POST:()=>d});var o=r(9303),a=r(8716),s=r(670),i=r(7070),u=r(3493);async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("currency")??"USD",n=await u._.donation.aggregate({_sum:{amount:!0},_count:!0,where:{currency:r}}),o=n._sum.amount??0,a=n._count??0;return i.NextResponse.json({currency:r,totalAmount:o,totalCount:a})}catch(e){return console.error("GET /api/donations error",e),i.NextResponse.json({error:"Failed to load donations summary"},{status:500})}}async function d(e){try{let{amount:t,name:r,email:n,message:o,userId:a,currency:s}=await e.json()??{};if(!t||"number"!=typeof t||t<=0)return i.NextResponse.json({error:"amount must be a positive number"},{status:400});let p=await u._.donation.create({data:{amount:t,currency:"string"==typeof s?s:"USD",name:"string"==typeof r?r:null,email:"string"==typeof n?n:null,message:"string"==typeof o?o:null,userId:"number"==typeof a?a:null}});return i.NextResponse.json(p,{status:201})}catch(e){return console.error("POST /api/donations error",e),i.NextResponse.json({error:"Failed to create donation"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/donations/route",pathname:"/api/donations",filename:"route",bundlePath:"app/api/donations/route"},resolvedPagePath:"D:\\item\\app\\api\\donations\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g}=l,y="/api/donations/route";function x(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},3493:(e,t,r)=>{r.d(t,{_:()=>o});let n=require("@prisma/client"),o=globalThis.prisma??new n.PrismaClient({log:["error"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972],()=>r(8004));module.exports=n})();