"use strict";(()=>{var e={};e.id=866,e.ids=[866],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2926:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>p,POST:()=>c});var s=r(9303),o=r(8716),a=r(670),i=r(7070),u=r(3493);async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("accountId"),n=r?Number(r):void 0,s=await u._.transaction.findMany({where:n?{accountId:n}:void 0,orderBy:{timestamp:"desc"},take:50});return i.NextResponse.json(s)}catch(e){return console.error("GET /api/transactions error",e),i.NextResponse.json({error:"Failed to load transactions"},{status:500})}}async function c(e){try{let{accountId:t,type:r,direction:n,symbol:s,amount:o,price:a,description:p}=await e.json()??{};if(!t||"number"!=typeof t)return i.NextResponse.json({error:"accountId is required"},{status:400});if(!r||"string"!=typeof r)return i.NextResponse.json({error:"type is required"},{status:400});if(!o||"number"!=typeof o)return i.NextResponse.json({error:"amount is required"},{status:400});let c=await u._.transaction.create({data:{accountId:t,type:r,direction:"string"==typeof n?n:null,symbol:"string"==typeof s?s:null,amount:o,price:"number"==typeof a?a:null,description:"string"==typeof p?p:null}});return i.NextResponse.json(c,{status:201})}catch(e){return console.error("POST /api/transactions error",e),i.NextResponse.json({error:"Failed to create transaction"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/transactions/route",pathname:"/api/transactions",filename:"route",bundlePath:"app/api/transactions/route"},resolvedPagePath:"D:\\item\\app\\api\\transactions\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:f}=d,y="/api/transactions/route";function x(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},3493:(e,t,r)=>{r.d(t,{_:()=>s});let n=require("@prisma/client"),s=globalThis.prisma??new n.PrismaClient({log:["error"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972],()=>r(2926));module.exports=n})();